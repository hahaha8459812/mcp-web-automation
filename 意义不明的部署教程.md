## ðŸš€ åœ¨ /opt ç›®å½•éƒ¨ç½² MCP Web Automation Tool

> åœ¨ Linux ç³»ç»Ÿçš„ /opt ç›®å½•ä¸‹è¿›è¡Œç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²

---

## ðŸ“‹ **éƒ¨ç½²æ¦‚è¿°**

`/opt` ç›®å½•æ˜¯ Linux ç³»ç»Ÿä¸­å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æ ‡å‡†ä½ç½®ï¼Œé€‚åˆç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²ã€‚

---

## 1ï¸âƒ£ **è¿žæŽ¥æœåŠ¡å™¨å¹¶å‡†å¤‡çŽ¯å¢ƒ**

### ðŸ” **è¿žæŽ¥åˆ°æœåŠ¡å™¨**
```bash
# é€šè¿‡ SSH è¿žæŽ¥åˆ°æœåŠ¡å™¨
ssh username@your-server-ip

# åˆ‡æ¢åˆ° root ç”¨æˆ·ï¼ˆæŽ¨èï¼‰
sudo su -
# æˆ–è€…æ¯ä¸ªå‘½ä»¤å‰åŠ  sudo
```

### ðŸ“ **è¿›å…¥ /opt ç›®å½•**
```bash
# è¿›å…¥ /opt ç›®å½•
cd /opt

# æŸ¥çœ‹å½“å‰ç›®å½•
pwd
# è¾“å‡ºï¼š/opt
```

---

## 2ï¸âƒ£ **å…‹éš†é¡¹ç›®**

### ðŸ“¥ **ä¸‹è½½é¡¹ç›®ä»£ç **
```bash
# åœ¨ /opt ç›®å½•ä¸‹å…‹éš†é¡¹ç›®
git clone https://github.com/hahaha8459812/mcp-web-automation.git

# æŸ¥çœ‹åˆ›å»ºçš„ç›®å½•
ls -la mcp-web-automation/
```

### ðŸ‘¤ **è®¾ç½®ç›®å½•æƒé™**
```bash
# æ–¹æ¡ˆ Aï¼šä¿æŒ root æƒé™ï¼ˆæŽ¨èç”Ÿäº§çŽ¯å¢ƒï¼‰
chown -R root:root /opt/mcp-web-automation
chmod -R 755 /opt/mcp-web-automation

# æ–¹æ¡ˆ Bï¼šåˆ†é…ç»™ç‰¹å®šç”¨æˆ·ï¼ˆå¦‚æžœæœ‰ä¸“é—¨çš„æœåŠ¡ç”¨æˆ·ï¼‰
# åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
# useradd -r -s /bin/false mcp-user
# chown -R mcp-user:mcp-user /opt/mcp-web-automation

# æ–¹æ¡ˆ Cï¼šåˆ†é…ç»™å½“å‰ç”¨æˆ·
# chown -R $SUDO_USER:$SUDO_USER /opt/mcp-web-automation
```

---

## 3ï¸âƒ£ **æ‰§è¡Œå®‰è£…**

### ðŸ“‚ **è¿›å…¥é¡¹ç›®ç›®å½•**
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/mcp-web-automation

# ç¡®è®¤å½“å‰è·¯å¾„
pwd
# è¾“å‡ºï¼š/opt/mcp-web-automation
```

### ðŸ”§ **èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™**
```bash
# èµ‹äºˆå®‰è£…è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/install.sh
chmod +x scripts/start.sh

# ç¡®è®¤æƒé™è®¾ç½®
ls -la scripts/
```

### ðŸš€ **æ‰§è¡Œä¸€é”®å®‰è£…**
```bash
# è¿è¡Œå®‰è£…è„šæœ¬
./scripts/install.sh
```

---

## 4ï¸âƒ£ **éªŒè¯éƒ¨ç½²**

### ðŸ“Š **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./scripts/start.sh status

# æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
docker-compose ps
```

### ðŸ” **æµ‹è¯•æœåŠ¡**
```bash
# æœ¬åœ°å¥åº·æ£€æŸ¥
curl http://localhost:29527/health

# æŸ¥çœ‹ API å¯†é’¥
cat /opt/mcp-web-automation/config/config.json | grep api_key

# å¸¦è®¤è¯çš„æµ‹è¯•ï¼ˆæ›¿æ¢ä¸ºå®žé™…å¯†é’¥ï¼‰
curl -H "X-API-Key: your-actual-api-key" http://localhost:29527/health
```

---

## 5ï¸âƒ£ **åˆ›å»ºç³»ç»ŸæœåŠ¡ï¼ˆæŽ¨èï¼‰**

### ðŸ“ **åˆ›å»º systemd æœåŠ¡æ–‡ä»¶**
```bash
# åˆ›å»ºç³»ç»ŸæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/mcp-web-automation.service << 'EOF'
[Unit]
Description=MCP Web Automation Tool
Documentation=https://github.com/hahaha8459812/mcp-web-automation
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/opt/mcp-web-automation
ExecStart=/opt/mcp-web-automation/scripts/start.sh start
ExecStop=/opt/mcp-web-automation/scripts/start.sh stop
ExecReload=/opt/mcp-web-automation/scripts/start.sh restart
TimeoutStartSec=300
User=root
Group=root

[Install]
WantedBy=multi-user.target
EOF
```

### ðŸ”„ **å¯ç”¨ç³»ç»ŸæœåŠ¡**
```bash
# é‡æ–°åŠ è½½ systemd é…ç½®
systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
systemctl enable mcp-web-automation.service

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status mcp-web-automation.service
```

---

## 6ï¸âƒ£ **é…ç½®é˜²ç«å¢™å’Œå®‰å…¨**

### ðŸ”¥ **å¼€æ”¾ç«¯å£**
```bash
# Ubuntu/Debian (UFW)
ufw allow 29527/tcp
ufw status

# CentOS/RHEL (firewalld)
firewall-cmd --permanent --add-port=29527/tcp
firewall-cmd --reload
firewall-cmd --list-ports
```

### ðŸ” **ç”Ÿæˆæ›´å¼ºçš„ API å¯†é’¥**
```bash
# ç”Ÿæˆæ–°çš„ 32 ä½éšæœºå¯†é’¥
NEW_API_KEY=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
echo "æ–°çš„ API å¯†é’¥: $NEW_API_KEY"

# å¤‡ä»½åŽŸé…ç½®
cp /opt/mcp-web-automation/config/config.json /opt/mcp-web-automation/config/config.json.backup

# æ›¿æ¢ API å¯†é’¥
sed -i "s/\"api_key\": \"[^\"]*\"/\"api_key\": \"$NEW_API_KEY\"/g" /opt/mcp-web-automation/config/config.json

# é‡å¯æœåŠ¡åº”ç”¨æ–°é…ç½®
cd /opt/mcp-web-automation
./scripts/start.sh restart

# æ˜¾ç¤ºæ–°å¯†é’¥
echo "è¯·è®°å½•æ–°çš„ API å¯†é’¥: $NEW_API_KEY"
```

---

## 7ï¸âƒ£ **è®¾ç½®æ—¥å¿—è½®è½¬**

### ðŸ“ **é…ç½® logrotate**
```bash
# åˆ›å»ºæ—¥å¿—è½®è½¬é…ç½®
cat > /etc/logrotate.d/mcp-web-automation << 'EOF'
/opt/mcp-web-automation/logs/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        cd /opt/mcp-web-automation && ./scripts/start.sh restart > /dev/null 2>&1 || true
    endscript
}
EOF

# æµ‹è¯• logrotate é…ç½®
logrotate -d /etc/logrotate.d/mcp-web-automation
```

---

## 8ï¸âƒ£ **åˆ›å»ºç®¡ç†åˆ«å**

### âš¡ **æ·»åŠ ä¾¿æ·å‘½ä»¤**
```bash
# ä¸ºæ‰€æœ‰ç”¨æˆ·æ·»åŠ ç®¡ç†åˆ«å
cat >> /etc/bash.bashrc << 'EOF'

# MCP Web Automation Tool Aliases
alias mcp-status='cd /opt/mcp-web-automation && ./scripts/start.sh status'
alias mcp-logs='cd /opt/mcp-web-automation && ./scripts/start.sh logs -f'
alias mcp-restart='cd /opt/mcp-web-automation && ./scripts/start.sh restart'
alias mcp-start='cd /opt/mcp-web-automation && ./scripts/start.sh start'
alias mcp-stop='cd /opt/mcp-web-automation && ./scripts/start.sh stop'
alias mcp-backup='cd /opt/mcp-web-automation && ./scripts/start.sh backup'
alias mcp-health='curl -H "X-API-Key: $(grep -o "\"api_key\": *\"[^\"]*\"" /opt/mcp-web-automation/config/config.json | cut -d "\"" -f4)" http://localhost:29527/health'
EOF

# é‡æ–°åŠ è½½ bashrc
source /etc/bash.bashrc
```

---

## 9ï¸âƒ£ **éªŒè¯å®Œæ•´éƒ¨ç½²**

### âœ… **å®Œæ•´æµ‹è¯•**
```bash
# ä½¿ç”¨æ–°çš„åˆ«åæµ‹è¯•
mcp-status

# å¥åº·æ£€æŸ¥
mcp-health

# æŸ¥çœ‹æ—¥å¿—
mcp-logs
# æŒ‰ Ctrl+C é€€å‡ºæ—¥å¿—æŸ¥çœ‹

# æµ‹è¯•ç³»ç»ŸæœåŠ¡
systemctl status mcp-web-automation

# å¤–ç½‘è®¿é—®æµ‹è¯•ï¼ˆå¦‚æžœé…ç½®äº†å¤–ç½‘ï¼‰
curl -H "X-API-Key: your-api-key" http://your-server-ip:29527/health
```

---

## ðŸ”§ **æ—¥å¸¸ç®¡ç†å‘½ä»¤**

### ðŸ“‹ **å¸¸ç”¨æ“ä½œ**
```bash
# æ–¹å¼ 1ï¼šä½¿ç”¨ç³»ç»ŸæœåŠ¡
systemctl start mcp-web-automation     # å¯åŠ¨
systemctl stop mcp-web-automation      # åœæ­¢
systemctl restart mcp-web-automation   # é‡å¯
systemctl status mcp-web-automation    # çŠ¶æ€

# æ–¹å¼ 2ï¼šä½¿ç”¨é¡¹ç›®è„šæœ¬
cd /opt/mcp-web-automation
./scripts/start.sh start               # å¯åŠ¨
./scripts/start.sh stop                # åœæ­¢
./scripts/start.sh restart             # é‡å¯
./scripts/start.sh status              # çŠ¶æ€

# æ–¹å¼ 3ï¼šä½¿ç”¨åˆ«åï¼ˆä»»ä½•ç›®å½•ä¸‹ï¼‰
mcp-start                              # å¯åŠ¨
mcp-stop                               # åœæ­¢
mcp-restart                            # é‡å¯
mcp-status                             # çŠ¶æ€
mcp-logs                               # æŸ¥çœ‹æ—¥å¿—
mcp-health                             # å¥åº·æ£€æŸ¥
```

---

## ðŸ“ **æœ€ç»ˆç›®å½•ç»“æž„**

```
/opt/mcp-web-automation/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ config.json              # ç”Ÿäº§é…ç½®
â”‚   â”œâ”€â”€ config.json.backup       # é…ç½®å¤‡ä»½
â”‚   â””â”€â”€ config.example.json
â”œâ”€â”€ data/
â”‚   â””â”€â”€ user-data.json           # ç”¨æˆ·æ•°æ®
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ mcp-web-automation.log   # åº”ç”¨æ—¥å¿—
â”œâ”€â”€ backups/                     # è‡ªåŠ¨å¤‡ä»½
â”œâ”€â”€ src/                         # æºä»£ç 
â”œâ”€â”€ scripts/                     # ç®¡ç†è„šæœ¬
â””â”€â”€ docs/                        # æ–‡æ¡£
```

---

## ðŸŽ‰ **éƒ¨ç½²å®Œæˆï¼**

### ðŸ“Š **ç¡®è®¤ä¿¡æ¯**
- âœ… **å®‰è£…ä½ç½®**: `/opt/mcp-web-automation`
- âœ… **æœåŠ¡åœ°å€**: `http://your-server-ip:29527`
- âœ… **ç³»ç»ŸæœåŠ¡**: å·²é…ç½®å¼€æœºè‡ªå¯
- âœ… **æ—¥å¿—è½®è½¬**: å·²é…ç½®è‡ªåŠ¨æ¸…ç†
- âœ… **ç®¡ç†åˆ«å**: å·²æ·»åŠ ä¾¿æ·å‘½ä»¤
- âœ… **API å¯†é’¥**: å·²ç”Ÿæˆå¼ºå¯†ç 

### ðŸš€ **å¼€å§‹ä½¿ç”¨**
çŽ°åœ¨å¯ä»¥åœ¨ AI å®¢æˆ·ç«¯ä¸­é…ç½®è¿žæŽ¥ä¿¡æ¯ï¼Œå¼€å§‹ä½¿ç”¨ç½‘é¡µè‡ªåŠ¨åŒ–åŠŸèƒ½äº†ï¼

**é‡åˆ°é—®é¢˜ï¼Ÿè¿è¡Œ `mcp-logs` æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œæˆ–å‘Šè¯‰æˆ‘å…·ä½“é”™è¯¯ä¿¡æ¯ï¼**
